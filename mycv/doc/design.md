### 설계

여기에서는 모듈 설계를 api 다음 묶어서 나눠서 설계하네

User 모듈과 Reports모듈

리포지터리는 생성안됨 => 수동으로 해야됨 => 매번 다르기떄문

### TypeOrm

2가지 옵션 => TypeORM , Moongoose
타입오알엠 => SQLite , Postgres , MySQL , MongoDB

네스트랑 타입오알엠은 찰떡궁합 서로돕는 유틸이 많다

몽구스 => 몽고db

시작은 SQLite로 해서 나중엔 Postgres로 갈거라고함

npm i @nestjs/typeorm typeorm sqlite3

엔티티 파일은 앱 내부에서 저장하려는 리소스 중 하나의 종류만 정의함
사용자 엔티티 사용자 리소스가있는데 사용자라는 종류의 파일만 넣을거다

db파일 보고싶으면 extension 깔아야함

깔고 ctrl shift p sqlite로 open database 하면 파일탐색기 쪽에 컬럼 생성된것이 거기에 나옴

### SQL

sql 데이터 형태가 바뀌면 마이그레이션을 한다.

우리가엄격한 구조를 만든게아님

동기화 true는 TypeORM 이 구조를보고 자동으로 데이터 베이스구조를 업데이트 함.

개발시에만 쓰이는 모드라고한다.

@Entity 는 이 클래스를 살펴보고 새 테이블을 보고 따라와라 라고 명령

Primary Generated Column id 라는 컬럼을 추가함.

varchar

보통의 ORM 은 이렇게 안동작함 마이그레이션 파일을 작서해야한다고함.

싱크로나이즈는 개발환경에서만. 운영에서는 실행하지않는게 아주 중요하다.=> 실수로 열을 삭제하는 경우가 아주 흔하기때문에

이메일이 갑자기 사라진다면 아주 끔찎띄
그때는 대신에 마이그레이션 을 작성할 것이라고 함

개발중인데 아직 db 구조가 확정되지않았으면 이건 아주아주 나이스하다.

### 리포지토리에 대한 짤막한 설명

엔티티랑 리포지토리가 좀 헷갈릴수있다.
리포지토리에는 메서드 묶음이있음.
typeorm.io/#/repository-api 에서 확인해봐라

리포지토리 만드는 방법도 3가지이고 메서드도 거기서 거기인거처럼 보이는게 개많아보인다
공식문서를 읽을땐 이런점을 참고해라

뭐든지 항상 여러 가지 다양한 방법으로 수행할 수 있다. 라이브러리의 단점이기도함.abnf
SQL 내부의 논리를 이해하면 뭘할지 파악할 수 있다.

class-validator class-transformer 설치
main의 파이프에 연결한
white list -true는 허용된 이메일 과 패스워드만 존재하게함
